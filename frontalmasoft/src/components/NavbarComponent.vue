

<template>
  <nav style="display: flex; align-items: center; justify-content: space-between; width: 100%; height: 90px; background-color: #222222; padding: 0 0 0 30px;">
    <!-- Logo -->

    <!-- Navigation Links -->
    <div style="display: flex; align-items: center;">
      <div>
      <h1 style="color: #D9ED92; font-size: 32px; font-weight: 700; margin: 0;">AlmaSoft</h1>
    </div>


      <a href="/" style="display: flex; align-items: center; color: #FFFFFF; text-decoration: none; font-size: 16px; margin-right: 24px; margin-left: 54px;">
        <span style="width: 20px; height: 20px; margin-right: 8px; display: flex; align-items: center; justify-content: center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M1.83337 11.1869C1.83337 9.08919 1.83337 8.04034 2.30931 7.17084C2.78524 6.30135 3.65474 5.76171 5.39373 4.68245L7.22707 3.54463C9.06531 2.40376 9.98447 1.83333 11 1.83333C12.0156 1.83333 12.9348 2.40376 14.773 3.54463L16.6064 4.68244C18.3454 5.76171 19.2148 6.30135 19.6908 7.17084C20.1667 8.04034 20.1667 9.08919 20.1667 11.1869V12.5812C20.1667 16.157 20.1667 17.9449 19.0927 19.0558C18.0189 20.1667 16.2903 20.1667 12.8334 20.1667H9.16671C5.70974 20.1667 3.98126 20.1667 2.90731 19.0558C1.83337 17.9449 1.83337 16.157 1.83337 12.5812V11.1869Z" stroke="white" stroke-width="1.5"/>
            <path d="M13.75 16.5H8.25" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </span>
        <span>Inicio</span>
      </a>
      
      <a href="/productos" style="display: flex; align-items: center; color: #FFFFFF; text-decoration: none; font-size: 16px; margin-right: 24px;">
        <span style="width: 20px; height: 20px; margin-right: 8px; display: flex; align-items: center; justify-content: center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M14.2796 3.10013L16.1129 4.06222C18.0853 5.09727 19.0715 5.61479 19.6191 6.54476C20.1667 7.47472 20.1667 8.63194 20.1667 10.9464V11.0536C20.1667 13.368 20.1667 14.5253 19.6191 15.4553C19.0715 16.3852 18.0853 16.9027 16.1129 17.9378L14.2796 18.8998C12.6703 19.7444 11.8656 20.1667 11 20.1667C10.1344 20.1667 9.32978 19.7444 7.72047 18.8998L5.88714 17.9378C3.91478 16.9027 2.9286 16.3852 2.38099 15.4553C1.83337 14.5253 1.83337 13.368 1.83337 11.0536V10.9464C1.83337 8.63194 1.83337 7.47472 2.38099 6.54476C2.9286 5.61479 3.91478 5.09727 5.88714 4.06222L7.72047 3.10013C9.32978 2.2556 10.1344 1.83333 11 1.83333C11.8656 1.83333 12.6703 2.2556 14.2796 3.10013Z" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M19.25 6.875L15.5833 8.70833M15.5833 8.70833C15.5833 8.70833 15.304 8.84801 15.125 8.9375C13.5141 9.74298 11 11 11 11M15.5833 8.70833V11.9167M15.5833 8.70833L6.875 4.125M11 11L2.75 6.875M11 11V19.7083" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </span>
        <span>Productos</span>
      </a>
      
      <a href="/usuarios" style="display: flex; align-items: center; color: #FFFFFF; text-decoration: none; font-size: 16px; margin-right: 24px;">
        <span style="width: 20px; height: 20px; margin-right: 8px; display: flex; align-items: center; justify-content: center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M11 9.16666C13.0251 9.16666 14.6667 7.52504 14.6667 5.49999C14.6667 3.47495 13.0251 1.83333 11 1.83333C8.975 1.83333 7.33337 3.47495 7.33337 5.49999C7.33337 7.52504 8.975 9.16666 11 9.16666Z" stroke="white" stroke-width="1.5"/>
            <path d="M11 19.25C14.5439 19.25 17.4167 17.6084 17.4167 15.5833C17.4167 13.5583 14.5439 11.9167 11 11.9167C7.45621 11.9167 4.58337 13.5583 4.58337 15.5833C4.58337 17.6084 7.45621 19.25 11 19.25Z" stroke="white" stroke-width="1.5"/>
          </svg>
        </span>
        <span>Usuarios</span>
      </a>
      
      <a href="/movimientos" style="display: flex; align-items: center; color: #FFFFFF; text-decoration: none; font-size: 16px; margin-right: 24px;">
        <span style="width: 20px; height: 20px; margin-right: 8px; display: flex; align-items: center; justify-content: center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
          <path d="M1.83337 11C1.83337 6.67878 1.83337 4.51818 3.1758 3.17576C4.51823 1.83333 6.67883 1.83333 11 1.83333C15.3212 1.83333 17.4819 1.83333 18.8242 3.17576C20.1667 4.51818 20.1667 6.67878 20.1667 11C20.1667 15.3212 20.1667 17.4818 18.8242 18.8242C17.4819 20.1667 15.3212 20.1667 11 20.1667C6.67883 20.1667 4.51823 20.1667 3.1758 18.8242C1.83337 17.4818 1.83337 15.3212 1.83337 11Z" stroke="white" stroke-width="1.5"/>
          <path d="M14.6667 8.70834H7.33337M7.33337 8.70834L9.85421 6.41667M7.33337 8.70834L9.85421 11" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7.33337 13.2917H14.6667M14.6667 13.2917L12.1459 11M14.6667 13.2917L12.1459 15.5833" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>Movimientos</span>
      </a>
    </div>

    <!-- User Profile -->
    <div @click="toggleDropdown" class="user-info" style="display: flex; height: 100%; align-items: center; background-color: #D6F277; border-radius: 10px 0 0 10px; padding: 8px 12px; position: relative; cursor: pointer;">
  <div style="width: 32px; height: 32px; background-color: #222222; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
      <path d="M11 9.16666C13.0251 9.16666 14.6667 7.52504 14.6667 5.49999C14.6667 3.47495 13.0251 1.83333 11 1.83333C8.975 1.83333 7.33337 3.47495 7.33337 5.49999C7.33337 7.52504 8.975 9.16666 11 9.16666Z" stroke="white" stroke-width="1.5"/>
      <path d="M11 19.25C14.5439 19.25 17.4167 17.6084 17.4167 15.5833C17.4167 13.5583 14.5439 11.9167 11 11.9167C7.45621 11.9167 4.58337 13.5583 4.58337 15.5833C4.58337 17.6084 7.45621 19.25 11 19.25Z" stroke="white" stroke-width="1.5"/>
    </svg>
  </div>
  <div style="display: flex; flex-direction: column;">
    <span  v-if="user"  style="color: #222222; font-size: 14px; font-weight: 700;" >Hola, {{ user.nombre }} 
    </span>
    <span style="color: #222222; font-size: 12px;"></span>
  </div>

  </div>
    

  <!-- Dropdown -->
  <transition name="dropdown">
  <div  v-if="isDropdownOpen" class="dropdown" style="position: absolute; top: 80px; right: 25px; background: #222222; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); border-radius: 8px; overflow: hidden;">
     <div class="dropdown-content">
    <ul style="list-style: none; margin: 0; padding: 0;">
      <li style="padding: 12px; display: flex; align-items: center; gap: 8px; cursor: pointer;" @click.prevent="logout" :onclick="`window.location.href='/entrar'`" >
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
        <path d="M8.25195 6.41659C8.26305 4.42281 8.35147 3.34306 9.05581 2.63871C9.8613 1.83325 11.1576 1.83325 13.7503 1.83325H14.667C17.2597 1.83325 18.5562 1.83325 19.3615 2.63871C20.167 3.44417 20.167 4.74052 20.167 7.33325V14.6666C20.167 17.2593 20.167 18.5556 19.3615 19.3611C18.5562 20.1666 17.2597 20.1666 14.667 20.1666H13.7503C11.1576 20.1666 9.8613 20.1666 9.05581 19.3611C8.35147 18.6567 8.26305 17.577 8.25195 15.5833" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M13.7502 11H1.8335M1.8335 11L5.04183 8.25M1.8335 11L5.04183 13.75" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span style="color: #fff;">Cerrar sesión</span>
      </li>
    </ul>
    
  </div>
  </div>
  </transition>
  </nav>
</template>





<script setup>
import { ref, onMounted } from 'vue';
import { useRouter } from 'vue-router'; // Importa useRouter correctamente


const user = ref(null);
const isDropdownOpen = ref(false);
const router = useRouter(); // Define router aquí, esto corrige el error de "router no está definido"


onMounted(() => {
  const nombre_completo  = localStorage.getItem('usuarioNombre');
  if (nombre_completo ) {
    user.value = { nombre: nombre_completo };
  }
});

const toggleDropdown = () => {
  isDropdownOpen.value = !isDropdownOpen.value;
};

const logout = () => {
  // Elimina tanto el usuario como el token del localStorage
  localStorage.removeItem('usuarioNombre');
  localStorage.removeItem('token'); // Elimina el token JWT

  // Limpia el estado del usuario en el frontend
  user.value = null;
  isDropdownOpen.value = false;

  // Redirige al usuario a la página de inicio después de cerrar sesión
  router.push('/');
};
</script>