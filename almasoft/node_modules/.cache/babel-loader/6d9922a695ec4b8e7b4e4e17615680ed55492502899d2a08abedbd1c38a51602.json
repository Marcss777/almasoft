{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'R-SalidaPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const productos = ref([]);\n    const movimiento = ref({\n      producto_id: '',\n      cantidad: 0,\n      fecha: '',\n      motivo: '',\n      // <-- FALTA ESTE\n      notas: '',\n      rol: 'Salida' // <-- en minúscula, porque el backend valida así\n    });\n\n    // Obtener productos del stock al cargar\n    onMounted(async () => {\n      try {\n        const response = await axios.get('http://localhost:4000/producto/:id');\n        productos.value = response.data;\n        console.log('Productos obtenidos:', productos.value); // Log para ver los productos obtenidos\n      } catch (error) {\n        console.error('Error al obtener productos del stock:', error);\n      }\n    });\n    const registrarMovimiento = async () => {\n      try {\n        console.log(\"Datos que se están enviando:\", movimiento.value); // Verifica los datos\n        // eslint-disable-next-line no-unused-vars\n        const response = await axios.post('http://localhost:4000/api/movimientos', movimiento.value);\n        alert('Movimiento registrado correctamente');\n        router.push('/movimientos');\n      } catch (error) {\n        console.error('Error al registrar el movimiento:', error);\n        if (error.response) {\n          console.error('Detalles del error:', error.response.data);\n        }\n        alert('Hubo un error al registrar el movimiento');\n      }\n    };\n    const __returned__ = {\n      router,\n      productos,\n      movimiento,\n      registrarMovimiento,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","useRouter","router","productos","movimiento","producto_id","cantidad","fecha","motivo","notas","rol","response","get","value","data","console","log","error","registrarMovimiento","post","alert","push"],"sources":["C:/Users/hmalp/Downloads/almasoft/almasoft/src/views/R-SalidaPage.vue"],"sourcesContent":["<template>\r\n    <div style=\"background-color: #2E2E2E; min-height: 100vh; width: 100%;\">\r\n      <!-- Contenido principal (sin navbar como solicitado) -->\r\n      <div style=\"padding: 16px 30px;\">\r\n        <!-- Encabezado de la página -->\r\n        <div style=\"margin-bottom: 20px;\">\r\n          <h1 style=\"font-size: 34px; font-weight: 600; color: white; margin: 0;\">Registrar Salida de Inventario</h1>\r\n          <p style=\"font-size: 18px; color: #ffffff; margin: 2px 0 0 0; font-weight: 300;\">Complete el formulario para registrar una nueva salida de productos.</p>\r\n        </div>\r\n        \r\n        <!-- Card del formulario -->\r\n        <div style=\"background-color: #333333; border-radius: 10px; border: 1px solid #3B3B3B;\">\r\n          <div style=\"padding: 13px 0 5px 22px; border-bottom: 1px solid #3B3B3B;\">\r\n            <h2 style=\"font-size: 16px; color: white; margin: 0; font-weight: 600;\">Formulario de salida</h2>\r\n          </div>\r\n          \r\n          <div style=\"padding: 20px;\">\r\n          <form @submit.prevent=\"registrarMovimiento\">\r\n            <!-- Primera fila: Producto, Cantidad, Motivo -->\r\n            <div style=\"display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px;\">\r\n              <!-- Producto -->\r\n              <div>\r\n                <label style=\"display: block; font-size: 14px; color: white; margin-bottom: 8px;\">Producto</label>\r\n                <div style=\"position: relative;\">\r\n                  <select id=\"producto_id\" v-model=\"movimiento.producto_id\" style=\"width: 100%; padding: 10px 35px 10px 15px; appearance: none; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; cursor: pointer; font-family: 'Poppins', sans-serif;\">\r\n                   <option v-for=\"producto in productos\" :key=\"producto.id\" :value=\"producto.id\">\r\n                     {{ producto.nombre }}\r\n                    </option>\r\n                  </select>\r\n                  <span style=\"position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #fff; pointer-events: none;\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\">\r\n                      <path d=\"M11.875 5.625L7.5 9.375L3.125 5.625\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <!-- Cantidad -->\r\n              <div>\r\n                <label style=\"display: block; font-size: 14px; color: white; margin-bottom: 8px;\">Cantidad</label>\r\n                <div style=\"position: relative;\">\r\n                  <input \r\n                    type=\"number\" id=\"cantidad\" v-model=\"movimiento.cantidad\" \r\n                    style=\"width: 100%; padding: 10px 15px; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; font-family: 'Poppins', sans-serif; box-sizing: border-box;\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <!-- Motivo -->\r\n              <div>\r\n                <label style=\"display: block; font-size: 14px; color: white; margin-bottom: 8px;\">Motivo</label>\r\n                <div style=\"position: relative;\">\r\n                  <select id=\"motivo\" v-model=\"movimiento.motivo\" style=\"width: 100%; padding: 10px 35px 10px 15px; appearance: none; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; cursor: pointer; font-family: 'Poppins', sans-serif;\">\r\n                    <option value=\"\" disabled selected>Seleccionar motivo</option>\r\n                    <option>Venta</option>\r\n                    <option>Producto defectuoso</option>\r\n                    <option>Perdida o robo</option>\r\n                    <option>Transferencia a otra ubicacion</option>\r\n                    <option>Otro</option>\r\n                  </select>\r\n                  <span style=\"position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #fff; pointer-events: none;\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\">\r\n                      <path d=\"M11.875 5.625L7.5 9.375L3.125 5.625\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Segunda fila: Fecha y hora, Notas adicionales -->\r\n            <div style=\"display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-bottom: 30px;\">\r\n              <!-- Fecha y hora -->\r\n              <div>\r\n                <label style=\"display: block; font-size: 14px; color: white; margin-bottom: 8px;\">Fecha y hora</label>\r\n                <div style=\"display: flex; gap: 10px;\">\r\n                    \r\n                    <!-- Input de fecha -->\r\n                    <div  style=\"position: relative; flex: 1;\">\r\n                    <input \r\n                        type=\"date\" id=\"fecha\" v-model=\"movimiento.fecha\" \r\n                        style=\"appearance: none; width: 100%; padding: 10px 35px 10px 15px; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; font-family: 'Poppins', sans-serif;\"\r\n                    />\r\n                    <span  style=\"position: absolute; right: 10px; top: 55%; transform: translateY(-50%); color: #fff; pointer-events: none;\">\r\n                        <!-- Icono calendario SVG -->\r\n                        <!-- (SVG ya incluido correctamente) -->\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\r\n                        <path d=\"M6 1.5V3.75\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M12 1.5V3.75\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M2.625 6.8175H15.375\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M15.75 6.375V12.75C15.75 15 14.625 16.5 12 16.5H6C3.375 16.5 2.25 15 2.25 12.75V6.375C2.25 4.125 3.375 2.625 6 2.625H12C14.625 2.625 15.75 4.125 15.75 6.375Z\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M11.771 10.275H11.7778\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M11.771 12.525H11.7778\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M8.99661 10.275H9.00335\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M8.99661 12.525H9.00335\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M6.22073 10.275H6.22747\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M6.22073 12.525H6.22747\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                      </svg>\r\n                    </span>\r\n                    </div>\r\n                    \r\n                    <!-- Input de hora -->\r\n                    <div style=\"position: relative; width: 100px;\">\r\n                    <input \r\n                        type=\"time\" \r\n                        value=\"18:30\"\r\n                        style=\"appearance: none; width: 100%; padding: 10px 35px 10px 15px; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; font-family: 'Poppins', sans-serif;\"\r\n                    />\r\n                    <span style=\"position: absolute; right: 10px; top: 55%; transform: translateY(-50%); color: #fff; pointer-events: none;\">\r\n                        <!-- Icono reloj SVG -->\r\n                        <!-- (SVG ya incluido correctamente) -->\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\r\n                        <path d=\"M16.5 9C16.5 13.14 13.14 16.5 9 16.5C4.86 16.5 1.5 13.14 1.5 9C1.5 4.86 4.86 1.5 9 1.5C13.14 1.5 16.5 4.86 16.5 9Z\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M11.7825 11.385L9.4575 9.9975C9.0525 9.75 8.7225 9.18 8.7225 8.7075V5.625\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                      </svg>\r\n                    </span>\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n              \r\n              <!-- Notas adicionales -->\r\n              <div>\r\n                <label style=\"display: block; font-size: 14px; color: white; margin-bottom: 8px;\">Notas adicionales</label>\r\n                <textarea  id=\"notas\" v-model=\"movimiento.notas\"  rows=\"2\" cols=\"5\"\r\n                  style=\"width: 100%; height: 43px; padding: 10px 15px; background-color: #2A2A2A; border: 1px solid #3B3B3B; border-radius: 10px; color: white; font-size: 14px; outline: none; resize: vertical; max-height: 200px; min-height: 43px; font-family: 'Poppins', sans-serif;\"\r\n                  placeholder=\"Escribe notas adicionales aquí...\"\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Botones de acción -->\r\n            <div style=\"display: flex; justify-content: flex-end; gap: 15px;\">\r\n               <button onclick=\"window.location.href='/movimientos'\" style=\"background-color: #2A2A2A; color: white; border: 1px solid #3B3B3B; border-radius: 10px; padding: 10px 20px; font-size: 15px; font-weight: 400; cursor: pointer; font-family: 'Poppins', sans-serif;\">\r\n                Cancelar\r\n              </button>\r\n              <button type=\"submit\" style=\"background-color: #C14444; color: white; border: none; border-radius: 10px; padding: 10px 20px; font-size: 15px; font-weight: 400; cursor: pointer; font-family: 'Poppins', sans-serif; display: flex; align-items: center;\">\r\n                Registrar Salida\r\n              </button>\r\n            </div>\r\n             </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\n\r\nconst productos = ref([]);\r\nconst movimiento = ref({\r\n  producto_id: '',\r\n  cantidad: 0,\r\n  fecha: '',\r\n  motivo: '', // <-- FALTA ESTE\r\n  notas: '',\r\n  rol: 'Salida' // <-- en minúscula, porque el backend valida así\r\n});\r\n\r\n\r\n// Obtener productos del stock al cargar\r\nonMounted(async () => {\r\n  try {\r\n    \r\n    const response = await axios.get('http://localhost:4000/producto/:id');\r\n    productos.value = response.data;\r\n    console.log('Productos obtenidos:', productos.value); // Log para ver los productos obtenidos\r\n  } catch (error) {\r\n    console.error('Error al obtener productos del stock:', error);\r\n  }\r\n});\r\n\r\nconst registrarMovimiento = async () => {\r\n  try {\r\n    console.log(\"Datos que se están enviando:\", movimiento.value);  // Verifica los datos\r\n    // eslint-disable-next-line no-unused-vars\r\n    const response = await axios.post('http://localhost:4000/api/movimientos', movimiento.value);\r\n    alert('Movimiento registrado correctamente');\r\n    router.push('/movimientos');\r\n  } catch (error) {\r\n    console.error('Error al registrar el movimiento:', error);\r\n    if (error.response) {\r\n      console.error('Detalles del error:', error.response.data);\r\n    }\r\n    alert('Hubo un error al registrar el movimiento');\r\n  }\r\n};\r\n\r\n\r\n</script>\r\n\r\n\r\n\r\n  <style>\r\ninput[type=\"date\"]::-webkit-calendar-picker-indicator,\r\ninput[type=\"time\"]::-webkit-calendar-picker-indicator {\r\n  opacity: 0;\r\n  display: none;\r\n}\r\n</style>"],"mappings":"AAmJA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAE1B,MAAME,SAAS,GAAGL,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMM,UAAU,GAAGN,GAAG,CAAC;MACrBO,WAAW,EAAE,EAAE;MACfC,QAAQ,EAAE,CAAC;MACXC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MAAE;MACZC,KAAK,EAAE,EAAE;MACTC,GAAG,EAAE,QAAQ,CAAC;IAChB,CAAC,CAAC;;IAGF;IACAX,SAAS,CAAC,YAAY;MACpB,IAAI;QAEF,MAAMY,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,oCAAoC,CAAC;QACtET,SAAS,CAACU,KAAK,GAAGF,QAAQ,CAACG,IAAI;QAC/BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEb,SAAS,CAACU,KAAK,CAAC,CAAC,CAAC;MACxD,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;MAC/D;IACF,CAAC,CAAC;IAEF,MAAMC,mBAAmB,GAAG,MAAAA,CAAA,KAAY;MACtC,IAAI;QACFH,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEZ,UAAU,CAACS,KAAK,CAAC,CAAC,CAAE;QAChE;QACA,MAAMF,QAAQ,GAAG,MAAMX,KAAK,CAACmB,IAAI,CAAC,uCAAuC,EAAEf,UAAU,CAACS,KAAK,CAAC;QAC5FO,KAAK,CAAC,qCAAqC,CAAC;QAC5ClB,MAAM,CAACmB,IAAI,CAAC,cAAc,CAAC;MAC7B,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,IAAIA,KAAK,CAACN,QAAQ,EAAE;UAClBI,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAACN,QAAQ,CAACG,IAAI,CAAC;QAC3D;QACAM,KAAK,CAAC,0CAA0C,CAAC;MACnD;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}